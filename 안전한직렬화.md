using System.Text.Json;

public static string SafeSerialize(object obj)
{
    try
    {
        var options = new JsonSerializerOptions
        {
            WriteIndented = true,
            ReferenceHandler = System.Text.Json.Serialization.ReferenceHandler.IgnoreCycles
        };
        return JsonSerializer.Serialize(obj, options);
    }
    catch
    {
        // 직렬화 실패하면 빈 객체로 처리
        return "{}";
    }
}

// 사용 예
var result = SafeSerialize(myObject);
Console.WriteLine(result);
